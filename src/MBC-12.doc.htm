<!DOCTYPE html>
<html>
<head>
    <title>[#MBC-12] Язык вебмастера</title>
    <meta http-equiv="Content-Type" Content="application/vnd.ms-word; charset=UTF-8">
        <style type="text/css">

.tableBorder, .grid
{
    background-color: #fff;
    width: 100%;
    border-collapse: collapse;
}

.tableBorder td, .grid td
{
    vertical-align: top;
    padding: 2px;
    border: 1px solid #ccc;
}

.noPadding
{
    padding: 0 !important;
}

h3 .subText
{
    font-size: 60%;
    font-weight: normal;
}

.tabLabel
{
    font-weight: bold;
    border: 1px solid #ccc;
    border-bottom:none;
    padding: 2px;
    display: inline;
}

td.blank
{
    padding: 0;
    margin: 0;
}

.blank td
{
    border: none;
}

#descriptionArea
{
    margin: 0;
    padding: 2px;
    border: 1px solid #ccc;
}

hr
{
    border-top:1px solid #aaa;
}

hr.fullcontent
{
  height: 15px;
  padding: 10px 0;
  background: #fff url('https://adagency.atlassian.net/images/icons/hr.gif') no-repeat scroll center;
}

</style>

</head>
<body>

<table class="tableBorder" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td bgcolor="#f0f0f0" width="100%" colspan="2" valign="top">
                            <h3 class="formtitle">
                        [MBC-12]&nbsp;<a href="https://adagency.atlassian.net/browse/MBC-12">Язык вебмастера</a>
            <span class="subText">
               Created: 19/Feb/17                   &nbsp;Updated: 26/Jun/17

                                                    &nbsp;Resolved: 23/Jun/17
                            </span>
            </h3>
        </td>
    </tr>
    <tr>
        <td width="20%"><b>Status:</b></td>
        <td width="80%">Done</td>
    </tr>
    <tr>
        <td width="20%"><b>Project:</b></td>
        <td width="80%"><a href="https://adagency.atlassian.net/secure/BrowseProject.jspa?id=10100">MixTraff CRM</a></td>
    </tr>

        <tr>
            <td><b>Component/s:</b></td>
            <td>
                            None
                </td>
    </tr>
    

        <tr>
            <td><b>Affects Version/s:</b></td>
            <td>
                            None
                </td>
    </tr>
    

        <tr>
            <td><b>Fix Version/s:</b></td>
            <td>
                            None
                </td>
    </tr>
    
    </table>

<br />
<table class="grid" cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td bgcolor="#f0f0f0" valign="top" width="20%">
            <b>Type:</b>
        </td>
        <td bgcolor="#ffffff" valign="top"  width="30%" >
            Task
        </td>

                    <td bgcolor="#f0f0f0">
                <b>Priority:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" nowrap>
                Medium
            </td>
            </tr>
    <tr>
                        <td bgcolor="#f0f0f0" valign="top" width="20%">
                <b>Reporter:</b>
            </td>
            <td bgcolor="#ffffff" valign="top"  width="30%" >
                                            <a class="user-hover" rel="vadik" id="word_reporter_vadik" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=vadik">Vadim Klimenko</a>
                            </td>
        
                    <td bgcolor="#f0f0f0" width="20%">
                <b>Assignee:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" nowrap  width="30%" >
                                            <a class="user-hover" rel="4841601" id="word_assignee_4841601" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=4841601">yybitb</a>
                            </td>
            </tr>
    	<tr>
		<td bgcolor="#f0f0f0" width="20%">
			<b>Resolution:</b>
		</td>
		<td bgcolor="#ffffff" valign="top" width="30%" nowrap>
                            Done
                    </td>
                    <td bgcolor="#f0f0f0" width="20%">
                <b>Votes:</b>
            </td>
            <td bgcolor="#ffffff" valign="top" width="30%" nowrap>
                0
            </td>
        
    </tr>
    
        <tr>
        <td bgcolor="#f0f0f0" width="20%">
            <b>Labels:</b>
        </td>
        <td id="labels-11700-value" class="value" bgcolor="#ffffff" valign="top" colspan="3" nowrap>
                            None
                    </td>
    </tr>
    
    	<tr>
        		<td bgcolor="#f0f0f0" width="20%"><b>Remaining Estimate:</b></td>
        <td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
    </tr>
    <tr>
                <td bgcolor="#f0f0f0" width="20%"><b>Time Spent:</b></td>
		<td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
	</tr>
    <tr>
                <td bgcolor="#f0f0f0" width="20%"><b>Original Estimate:</b></td>
		<td bgcolor="#ffffff" valign="top" nowrap width="80%" colspan="3">
                            Not Specified
            		</td>
    </tr>
    
    </table>



    <br />

    	<table class="grid" cellpadding="0" cellspacing="0" border="0" width="100%">
            

        
    



</table>

    <br/>

    <table cellpadding="2" cellspacing="0" border="0" width="100%" align="center">
    <tr>
        <td bgcolor="#bbbbbb" width="1%" nowrap align="center">
            &nbsp;<font color="#ffffff"><b>Description</b></font>&nbsp;
        </td>
        <td>&nbsp;</td>
    </tr>
    </table>

    <table cellpadding="0" cellspacing="0" border="0" width="100%">
    <tr>
        <td id="descriptionArea">
            <p>В карточку домена добавляем "язык вебмастера" в клиентской части . Это поле видят все менеджеры и админ.</p>

<p>1) Список  доступных языков можно указать в <a href="http://admincrm.mixtraff.com/?r=config/index" class="external-link" rel="nofollow">администраторской части</a> CRM и обновляется он новыми языками также при парсинге из пункта 3. <br/>
2) Добавляем поле в карточку домена ( <a href="http://take.ms/i0tkr" class="external-link" rel="nofollow">http://take.ms/i0tkr</a> ) мультиселект с выбором языка вебмастера. Его можно изменять менеджерам и админу. <br/>
3) При первом парсинге домена смотрим </p>
<div class="code panel" style="border-width: 1px;"><div class="codeContent panelContent">
<pre class="code-html">
<span class="code-tag">&lt;meta name=<span class="code-quote">"language"</span> content=<span class="code-quote">"%%"</span>/&gt;</span>
</pre>
</div></div>
<p>По языку страницы на автомате ставим язык вебмастера. В случае если этого поля нету, то ставим язык вебмастера на основание кейворда по которому нашли этот домен в поисковой выдаче (добавить нужно язык кейворда в разделе парсинга) </p>
            <br/>
        </td>
    </tr>
    </table>

    <br/>

    <table cellpadding="2" cellspacing="0" border="0" width="100%" align="center">
    <tr>
        <td bgcolor="#bbbbbb" width="1%" nowrap align="center">
            &nbsp;<font color="#ffffff"><b>Comments</b></font>&nbsp;
        </td>
        <td>&nbsp;</td>
    </tr>
    </table>

    <table cellpadding="0" cellspacing="0" border="0" width="100%" class="grid" style="margin: 0;">
                <tr id="comment-header-11800"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="4841601" id="word_commented_4841601" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=4841601">yybitb</a>
                                        <font size="-2">
            [
                <font color="#336699">25/Feb/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-11800"><td bgcolor="#ffffff">
            <p>последний комит d2b959c - 
    <span class="jira-issue-macro resolved" data-jira-key="MBC-12" >
                <!-- replace the span with an AUI template -->
        <a href="https://adagency.atlassian.net/browse/MBC-12" class="jira-issue-macro-key issue-link"  title="Язык вебмастера" >
            <img class="icon" src="https://adagency.atlassian.net/secure/viewavatar?size=xsmall&avatarId=10318&avatarType=issuetype" />
            MBC-12
        </a>
                                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success jira-macro-single-issue-export-pdf">Done</span>
            </span>
 (Язык вебмастера домена) . Запрос к домену (парсинг &lt;meta name="language" content="%%"/&gt;) происходит <b>через прокси</b> независимо от прокси настроек парсера более высокого уровня. _Пример - Яндекс парсер (прямой запрос без прокси). _</p>
        </td></tr>
                <tr id="comment-header-11801"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="4841601" id="word_commented_4841601" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=4841601">yybitb</a>
                                        <font size="-2">
            [
                <font color="#336699">25/Feb/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-11801"><td bgcolor="#ffffff">
            <p>Некоторые домены оформляют <b>'meta language'  в произвольном формате</b>. </p>

<p>Пример:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>'cinetrafic.fr': 'fr_FR'
'cinemay.com': 'French'
</pre>
</div></div>

<p>Еще пример:</p>

<div class="preformatted panel" style="border-width: 1px;"><div class="preformattedContent panelContent">
<pre>'zaycev.fm': 'russian'
'kinobos.ru': 'Russian Federation'
</pre>
</div></div>
        </td></tr>
                <tr id="comment-header-13101"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="4841601" id="word_commented_4841601" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=4841601">yybitb</a>
                                        <font size="-2">
            [
                <font color="#336699">21/Mar/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-13101"><td bgcolor="#ffffff">
            <p>Комит 3d4cca8 - fix: формирование meta-language по первым 2м буквам</p>
        </td></tr>
                <tr id="comment-header-16000"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="vadik" id="word_commented_vadik" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=vadik">Vadim Klimenko</a>
                                        <font size="-2">
            [
                <font color="#336699">09/Jun/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-16000"><td bgcolor="#ffffff">
            <p>1) есть домен view-source:<a href="https://it.wikipedia.org/wiki/Pagina_principale" class="external-link" rel="nofollow">https://it.wikipedia.org/wiki/Pagina_principale</a><br/>
в коде есть тег  &lt;html class="client-nojs" lang="it" dir="ltr"&gt;<br/>
нужно детектить определение языка также и отсюда lang="it".</p>

<p>2) Этот комит 3d4cca8 - fix: формирование meta-language по первым 2м буквам - не совсем является правильным, нужно сделать бд сопоставления языков и регулярками парсить эти данные из кода страницы и определять верный язык по <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" class="external-link" rel="nofollow">https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a> , эту базу нужно просто внести в бд системы и по ней сверяться. То есть к примеру в коде получили  fr_FR или French , взяли первые две буквы и посмотрели по List_of_ISO_639-1_codes (ссылка выше) какой это язык и также проверили по полному вхождению из мета-тега языка, к примеру там вписано French , то взяли полностью это слово и сверили по базе, есть ли там такое. </p>

<p>3) В интерфейсе везде используем 639-1 формат по стандарту из <a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes" class="external-link" rel="nofollow">https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes</a> </p>
        </td></tr>
                <tr id="comment-header-16001"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="vadik" id="word_commented_vadik" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=vadik">Vadim Klimenko</a>
                                        <font size="-2">
            [
                <font color="#336699">09/Jun/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-16001"><td bgcolor="#ffffff">
            <p><b><font color="#d04437">ЭТО УСЛОВИЕ НЕ ТРОГАЕМ которое было описано в начальном ТЗ</font></b><br/>
По языку страницы на автомате ставим язык вебмастера. В случае если этого поля нету, то ставим язык вебмастера на основание кейворда по которому нашли этот домен в поисковой выдаче (добавить нужно язык кейворда в разделе парсинга)</p>
        </td></tr>
                <tr id="comment-header-16701"><td bgcolor="#f0f0f0">
            Comment by  
                                                        <a class="user-hover" rel="4841601" id="word_commented_4841601" href="https://adagency.atlassian.net/secure/ViewProfile.jspa?name=4841601">yybitb</a>
                                        <font size="-2">
            [
                <font color="#336699">23/Jun/17</font>

                            ]
            </font>

        </td></tr>
        <tr id="comment-body-16701"><td bgcolor="#ffffff">
            <p>Комит 9575f38  - 
    <span class="jira-issue-macro resolved" data-jira-key="MBC-12" >
                <!-- replace the span with an AUI template -->
        <a href="https://adagency.atlassian.net/browse/MBC-12" class="jira-issue-macro-key issue-link"  title="Язык вебмастера" >
            <img class="icon" src="https://adagency.atlassian.net/secure/viewavatar?size=xsmall&avatarId=10318&avatarType=issuetype" />
            MBC-12
        </a>
                                                    <span class="aui-lozenge aui-lozenge-subtle aui-lozenge-success jira-macro-single-issue-export-pdf">Done</span>
            </span>
 (Язык вебмастера домена) - </p>

<ul>
	<li>дополнительно <b>проверять значение из тега &lt;html&gt;</b></li>
	<li>сравнивать полученное по значениям из таблицы языков <b>ISO-639</b></li>
</ul>

        </td></tr>
            </table>
Generated at Thu Sep 14 06:58:30 UTC 2017 by yybitb using JIRA 1001.0.0-SNAPSHOT#100059-sha1:5bc2bce065aebd69bf5a23bc3efdd94fd09dddc8.

</body>
</html>